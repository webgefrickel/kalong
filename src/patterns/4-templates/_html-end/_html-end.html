  {% if debug %}
    <script src="{{ '/scripts/main.js' | path }}" defer></script>




    {# TODO try different modern js loading approach #}



  {% else %}
    <!-- load legacy js code for browsers that do not support es2017+ -->
    <script>
      var modern = function() { try { new Function("(a = 0) => a"); return true; } catch (err) { return false; } }();
      var loadJs = function(src, cb) { "use strict"; var ref = document.getElementsByTagName("script")[0]; var script = document.createElement("script"); script.src = src; script.async = true; ref.parentNode.insertBefore(script, ref); if (cb && typeof(cb) === "function") { script.onload = cb; } return script; };
      if (modern) {
        loadJs("{{ '/scripts/main.min.js' | path }}");
      } else {
        loadJs("{{ '/scripts/main.legacy.min.js' | path }}");
      }
      {# if you want to use the serviceworker, uncomment this
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/serviceworker.js');
      }
      #}
    </script>
  {% endif %}
  </body>
</html>
